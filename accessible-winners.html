<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Этапы ITM Lab 2.0 (Версия для слабовидящих)</title>
    <style>
        /* Высококонтрастные цвета и крупные шрифты */
        :root {
            --bg-color: #000000;
            --text-color: #FFFFFF;
            --link-color: #FFFF00;
            --link-hover: #FFD700;
            --button-bg: #FFFFFF;
            --button-text: #000000;
            --border-color: #FFFFFF;
            --focus-color: #00FF00;
            --success-color: #00FF00;
            --warning-color: #FF8800;
            --locked-color: #FF4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 24px;
            line-height: 1.8;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--focus-color);
            color: var(--bg-color);
            padding: 8px;
            text-decoration: none;
            font-weight: bold;
            border-radius: 4px;
            z-index: 1000;
        }

        .skip-link:focus {
            top: 6px;
        }

        .accessibility-panel {
            background: #333333;
            border: 3px solid var(--border-color);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            max-width: 100%;
        }

        .accessibility-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-bottom: 15px;
        }

        .control-btn {
            background: var(--button-bg);
            color: var(--button-text);
            border: 2px solid var(--border-color);
            padding: 8px 12px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            white-space: nowrap;
            text-align: center;
            min-width: 0;
        }

        .control-btn:hover,
        .control-btn:focus {
            background: var(--focus-color);
            color: var(--bg-color);
            outline: 3px solid var(--link-color);
            outline-offset: 2px;
        }

        .header {
            margin-bottom: 40px;
            text-align: center;
        }

        .logo {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            text-decoration: none;
            color: var(--text-color);
            display: inline-block;
        }

        .logo:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 3px;
        }

        .nav {
            margin: 30px 0;
        }

        .nav-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .nav-link {
            color: var(--link-color);
            text-decoration: underline;
            font-size: 28px;
            font-weight: bold;
            padding: 15px 25px;
            border: 3px solid transparent;
            border-radius: 6px;
            display: inline-block;
            min-width: 200px;
            text-align: center;
        }

        .nav-link:hover,
        .nav-link:focus {
            color: var(--link-hover);
            background: #333333;
            border-color: var(--focus-color);
            outline: none;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            margin-bottom: 60px;
            padding: 30px;
            border: 3px solid var(--border-color);
            border-radius: 8px;
        }

        .section-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
            color: var(--link-color);
        }

        .version-switch {
            background: #444444;
            border: 3px solid var(--link-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
        }

        .version-link {
            color: var(--link-color);
            text-decoration: underline;
            font-size: 24px;
            font-weight: bold;
            margin: 0 15px;
        }

        .version-link:hover,
        .version-link:focus {
            color: var(--link-hover);
        }

        .stages-nav {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
            align-items: center;
        }

        .stage-nav-btn {
            background: var(--button-bg);
            color: var(--button-text);
            border: 3px solid var(--border-color);
            padding: 20px 30px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 8px;
            min-width: 300px;
            text-align: center;
        }

        .stage-nav-btn:hover,
        .stage-nav-btn:focus {
            background: var(--focus-color);
            color: var(--bg-color);
            outline: 3px solid var(--link-color);
            outline-offset: 2px;
        }

        .stage-nav-btn.active {
            background: var(--link-color);
            color: var(--bg-color);
        }

        .stage-block {
            display: none;
            background: #222222;
            border: 3px solid var(--border-color);
            padding: 40px;
            margin: 30px 0;
            border-radius: 8px;
        }

        .stage-block.active {
            display: block;
        }

        .stage-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid var(--border-color);
        }

        .stage-title {
            font-size: 40px;
            font-weight: bold;
            color: var(--link-color);
            margin-bottom: 20px;
        }

        .stage-status {
            font-size: 24px;
            font-weight: bold;
            padding: 15px 30px;
            border-radius: 8px;
            display: inline-block;
        }

        .stage-status.completed {
            background: var(--success-color);
            color: var(--bg-color);
        }

        .stage-status.open {
            background: var(--warning-color);
            color: var(--bg-color);
        }

        .stage-status.locked {
            background: var(--locked-color);
            color: var(--text-color);
        }

        .stage-description {
            background: #333333;
            border: 3px solid var(--link-color);
            padding: 30px;
            margin: 30px 0;
            border-radius: 8px;
            font-size: 26px;
            line-height: 1.6;
        }

        .timer-container {
            background: #333333;
            border: 3px solid var(--warning-color);
            padding: 30px;
            margin: 30px 0;
            border-radius: 8px;
            text-align: center;
        }

        .timer-title {
            font-size: 28px;
            font-weight: bold;
            color: var(--warning-color);
            margin-bottom: 20px;
        }

        .timer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .timer-unit {
            background: #444444;
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .timer-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--link-color);
            margin-bottom: 10px;
        }

        .timer-label {
            font-size: 20px;
            color: var(--text-color);
        }

        .winners-section {
            margin-top: 50px;
        }

        .search-container {
            margin: 30px 0;
            text-align: center;
        }

        .search-input {
            font-size: 24px;
            padding: 15px 20px;
            border: 3px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            width: 100%;
            max-width: 500px;
        }

        .search-input:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
            border-color: var(--link-color);
        }

        .winners-list {
            list-style: none;
            margin: 30px 0;
        }

        .winner-item {
            background: #333333;
            border: 3px solid var(--border-color);
            padding: 25px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .winner-name {
            font-size: 28px;
            font-weight: bold;
            color: var(--link-color);
            margin-bottom: 10px;
        }

        .winner-description {
            font-size: 22px;
            color: var(--text-color);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .pagination button {
            background: var(--button-bg);
            color: var(--button-text);
            border: 3px solid var(--border-color);
            padding: 15px 25px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
        }

        .pagination button:hover,
        .pagination button:focus {
            background: var(--focus-color);
            color: var(--bg-color);
        }

        .pagination button.active {
            background: var(--link-color);
            color: var(--bg-color);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .stats {
            text-align: center;
            font-size: 22px;
            margin: 20px 0;
            color: var(--text-color);
        }

        .footer {
            margin-top: 60px;
            padding: 30px;
            border-top: 3px solid var(--border-color);
            text-align: center;
        }

        /* Фокус для всех интерактивных элементов */
        a:focus,
        button:focus,
        input:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        /* Увеличение шрифта */
        .font-size-normal { font-size: 24px; }
        .font-size-large { font-size: 28px; }
        .font-size-xlarge { font-size: 32px; }

        /* Адаптивность */
        @media (max-width: 768px) {
            body { font-size: 22px; padding: 15px; }
            .logo { font-size: 40px; }
            .section-title { font-size: 32px; }
            .stage-title { font-size: 36px; }
            .nav-link { font-size: 24px; min-width: auto; }
            .stage-nav-btn { font-size: 20px; min-width: auto; }
            .accessibility-panel { padding: 10px; margin-bottom: 15px; }
            .accessibility-controls { grid-template-columns: repeat(2, 1fr); gap: 6px; }
            .control-btn { padding: 6px 8px; font-size: 12px; }
            .timer-grid { grid-template-columns: 1fr; }
            .pagination { flex-direction: column; align-items: center; }
        }
        
        @media (max-width: 480px) {
            .accessibility-controls { grid-template-columns: repeat(2, 1fr); gap: 5px; }
            .control-btn { font-size: 11px; padding: 5px 6px; }
        }
        
        @media (max-width: 360px) {
            .accessibility-controls { grid-template-columns: 1fr; }
            .control-btn { font-size: 14px; padding: 8px; }
        }
    </style>
</head>
<body class="font-size-normal">
    <a href="#main-content" class="skip-link">Перейти к основному содержанию</a>

    <div class="accessibility-panel">
        <h2>Панель доступности</h2>
        <div class="accessibility-controls">
            <button class="control-btn" onclick="changeFontSize('normal')" aria-label="Обычный размер шрифта">Обычный шрифт</button>
            <button class="control-btn" onclick="changeFontSize('large')" aria-label="Крупный размер шрифта">Крупный шрифт</button>
            <button class="control-btn" onclick="changeFontSize('xlarge')" aria-label="Очень крупный размер шрифта">Очень крупный шрифт</button>
            <button class="control-btn" onclick="toggleHighContrast()" aria-label="Переключить высокий контраст">Высокий контраст</button>
        </div>
        <p>Для навигации используйте клавишу Tab. Для активации элементов - Enter или Пробел.</p>
    </div>

    <header class="header">
        <a href="accessible-index.html" class="logo" aria-label="ITM LAB - главная страница">ITM LAB</a>
        <nav class="nav" role="navigation" aria-label="Основная навигация">
            <ul class="nav-list">
                <li><a href="accessible-index.html" class="nav-link">Главная</a></li>
                <li><a href="#stages" class="nav-link">Этапы хакатона</a></li>
                <li><a href="#winners" class="nav-link">Победители</a></li>
            </ul>
        </nav>
    </header>

    <main id="main-content" class="main-content" role="main">
        <div class="version-switch">
            <p><strong>Версии сайта:</strong></p>
            <a href="winners.html" class="version-link">Обычная версия</a>
            <a href="accessible-winners.kz.html" class="version-link">Нұсқасы</a>
        </div>

        <section class="section">
            <h1 class="section-title">Этапы ITM Lab 2.0</h1>
            <p style="text-align: center; font-size: 26px; margin: 30px 0;">
                Изучите подробную информацию о каждом этапе хакатона ITM Lab 2.0
            </p>
        </section>

        <section id="stages" class="section">
            <h2 class="section-title">Выберите этап</h2>
            <div class="stages-nav" role="tablist">
                <button class="stage-nav-btn active" onclick="showStage(1)" role="tab" aria-selected="true" aria-controls="stage1">Онлайн‑хакатон</button>
                <button class="stage-nav-btn" onclick="showStage(4)" role="tab" aria-selected="false" aria-controls="stage4">IntroDay</button>
                <button class="stage-nav-btn" onclick="showStage(3)" role="tab" aria-selected="false" aria-controls="stage3">Трекинг</button>
                <button class="stage-nav-btn" onclick="showStage(5)" role="tab" aria-selected="false" aria-controls="stage5">PitchDay</button>
                <button class="stage-nav-btn" onclick="showStage(2)" role="tab" aria-selected="false" aria-controls="stage2">DemoDay</button>
            </div>

            <!-- Этап 1: Онлайн хакатон -->
            <div class="stage-block active" id="stage1" role="tabpanel" aria-labelledby="stage1-tab">
                <div class="stage-header">
                    <h3 class="stage-title">Онлайн‑хакатон</h3>

                </div>
                <div class="stage-description">
                    <p><strong>Описание этапа:</strong></p>
                    <p>Онлайн-хакатон — это активный этап ITMLab 2.0, где участники изучают материалы, смотрят обучающие видео, знакомятся с инструкциями и подают заявки с идеями проектов. Этот этап позволяет командам подготовиться к основной программе и сформулировать свои инновационные решения для людей с инвалидностью.</p>
                </div>
            </div>

            <!-- Этап 4: IntroDay -->
            <div class="stage-block" id="stage4" role="tabpanel" aria-labelledby="stage4-tab">
                <div class="stage-header">
                    <h3 class="stage-title">IntroDay</h3>
                    <div class="stage-status open">ОТКРЫТО</div>
                </div>
                <div class="stage-description">
                    <p><strong>Описание этапа:</strong></p>
                    <p>IntroDay — это промежуточная очная защита проектов в рамках ITMLab 2.0. На этом этапе команды представляют текущие результаты работы перед жюри, получают экспертную обратную связь и рекомендации по дальнейшей доработке. Цель этапа — оценить прогресс, проверить готовность проекта к следующей стадии и отобрать 20 лучших команд для участия в трекинге.</p>
                </div>
                <div class="timer-container">
                    <div class="timer-title">Время до начала</div>
                    <div class="timer-grid">
                        <div class="timer-unit">
                            <div class="timer-value" id="days">00</div>
                            <div class="timer-label">Дни</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-value" id="hours">00</div>
                            <div class="timer-label">Часы</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-value" id="minutes">00</div>
                            <div class="timer-label">Минуты</div>
                        </div>
                        <div class="timer-unit">
                            <div class="timer-value" id="seconds">00</div>
                            <div class="timer-label">Секунды</div>
                        </div>
                    </div>
                    <p style="font-size: 24px; color: var(--warning-color); font-weight: bold;">17 сентября 2025</p>
                </div>
            </div>

            <!-- Этап 3: Трекинг -->
            <div class="stage-block" id="stage3" role="tabpanel" aria-labelledby="stage3-tab">
                <div class="stage-header">
                    <h3 class="stage-title">Трекинг</h3>
                    <div class="stage-status locked">БЛОКИРОВАНО</div>
                </div>
                <div class="stage-description">
                    <p><strong>Описание этапа:</strong></p>
                    <p>Трекинг — это этап интенсивной доработки проектов в рамках ITMLab 2.0, который проходит в течение 4 недель после IntroDay. На этом этапе 20 отобранных команд работают с персональными трекерами: каждой команде предоставляется 2 трекера — 1 технический трекер для решения технических задач и 1 бизнес-трекер для решения бизнес-задач. Цель этапа — доработать проекты до уровня готовности к внедрению и подготовить команды к финальной презентации.</p>
                </div>
            </div>

            <!-- Этап 5: PitchDay -->
            <div class="stage-block" id="stage5" role="tabpanel" aria-labelledby="stage5-tab">
                <div class="stage-header">
                    <h3 class="stage-title">PitchDay</h3>
                    <div class="stage-status locked">БЛОКИРОВАНО</div>
                </div>
                <div class="stage-description">
                    <p><strong>Описание этапа:</strong></p>
                    <p>Pitch Day - это этап, на котором команды презентуют доработанные проекты и бизнес-модели. В этот день будет известно, какие команды получат гранты в размере 600.000 тенге на разработку своих идей!</p>
                </div>
            </div>

            <!-- Этап 2: DemoDay -->
            <div class="stage-block" id="stage2" role="tabpanel" aria-labelledby="stage2-tab">
                <div class="stage-header">
                    <h3 class="stage-title">DemoDay</h3>
                    <div class="stage-status locked">БЛОКИРОВАНО</div>
                </div>
                <div class="stage-description">
                    <p><strong>Описание этапа:</strong></p>
                    <p>DemoDay — это финальное мероприятие ITMLab 2.0, где 10 лучших команд представляют готовые к внедрению проекты перед инвесторами, представителями бизнеса, государственных структур и партнёрских организаций. Этап направлен на установление деловых контактов, поиск инвестиций и заключение партнёрств для дальнейшего роста и масштабирования проектов.</p>
                </div>
            </div>
        </section>

        <section id="winners" class="winners-section section">
            <h2 class="section-title">Участники ITM Lab 2.0</h2>
            <p style="text-align: center; font-size: 26px; margin: 30px 0;">
                Поздравляем участников онлайн-хакатона ITM Lab 2.0! Эти 31 команда активно участвуют в текущем этапе и готовятся к следующим вызовам.
            </p>

            <div class="search-container">
                <label for="searchInput" style="display: block; font-size: 26px; font-weight: bold; margin-bottom: 15px;">Поиск команды:</label>
                <input type="text" class="search-input" placeholder="Введите название команды..." id="searchInput" aria-describedby="search-help">
                <p id="search-help" style="font-size: 20px; margin-top: 10px; color: #CCCCCC;">Начните вводить название для поиска</p>
            </div>

            <div class="stats" id="stats" aria-live="polite">
                Показано: <span id="shownCount">12</span> из <span id="totalCount">31</span> команд
            </div>

            <ul class="winners-list" id="winnersGrid" role="list">
                <!-- Карточки будут добавлены через JavaScript -->
            </ul>

            <div class="pagination" id="pagination" role="navigation" aria-label="Навигация по страницам">
                <!-- Пагинация будет добавлена через JavaScript -->
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>© 2025 ITM Lab. Все права защищены.</p>
    </footer>

    <script>
        // Данные победителей
        const winnersData = [
            { name: "EZSpeech", description: "Участник онлайн-хакатона" },
            { name: "Работяги", description: "Участник онлайн-хакатона" },
            { name: "AstroOrder", description: "Участник онлайн-хакатона" },
            { name: "MadZhan", description: "Участник онлайн-хакатона" },
            { name: "Human", description: "Участник онлайн-хакатона" },
            { name: "Soile AI", description: "Участник онлайн-хакатона" },
            { name: "DK Tech", description: "Участник онлайн-хакатона" },
            { name: "Future-IT", description: "Участник онлайн-хакатона" },
            { name: "команда РЕД", description: "Участник онлайн-хакатона" },
            { name: "PRIZMA", description: "Участник онлайн-хакатона" },
            { name: "Korem team", description: "Участник онлайн-хакатона" },
            { name: "4Suyen", description: "Участник онлайн-хакатона" },
            { name: "Involve", description: "Участник онлайн-хакатона" },
            { name: "Visual Mind", description: "Участник онлайн-хакатона" },
            { name: "Juno", description: "Участник онлайн-хакатона" },
            { name: "Ainala AI", description: "Участник онлайн-хакатона" },
            { name: "CALVADOS (Кальвадос)", description: "Участник онлайн-хакатона" },
            { name: "2731", description: "Участник онлайн-хакатона" },
            { name: "NEUHARMONY", description: "Участник онлайн-хакатона" },
            { name: "Sana", description: "Участник онлайн-хакатона" },
            { name: "SAMGA", description: "Участник онлайн-хакатона" },
            { name: "Qolda", description: "Участник онлайн-хакатона" },
            { name: "ASAR", description: "Участник онлайн-хакатона" },
            { name: "MEZU", description: "Участник онлайн-хакатона" },
            { name: "QAMQOR", description: "Участник онлайн-хакатона" },
            { name: "ЯРядом", description: "Участник онлайн-хакатона" },
            { name: "CaseX", description: "Участник онлайн-хакатона" },
            { name: "Popeyes", description: "Участник онлайн-хакатона" },
            { name: "JanaSolve", description: "Участник онлайн-хакатона" },
            { name: "Birge", description: "Участник онлайн-хакатона" },
            { name: "Online Travel Access", description: "Участник онлайн-хакатона" }
        ];

        let currentPage = 1;
        const itemsPerPage = 12;
        let filteredTeams = [...winnersData];

        // Функции доступности
        function changeFontSize(size) {
            const body = document.body;
            body.className = body.className.replace(/font-size-\w+/, '');
            body.classList.add('font-size-' + size);
            
            announceChange('Размер шрифта изменен на ' + 
                (size === 'normal' ? 'обычный' : 
                 size === 'large' ? 'крупный' : 'очень крупный'));
        }

        function toggleHighContrast() {
            const body = document.body;
            const isHighContrast = body.style.filter === 'invert(1)';
            
            if (isHighContrast) {
                body.style.filter = '';
                announceChange('Обычный контраст включен');
            } else {
                body.style.filter = 'invert(1)';
                announceChange('Высокий контраст включен');
            }
        }

        function announceChange(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.style.position = 'absolute';
            announcement.style.left = '-9999px';
            announcement.textContent = message;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // Функции этапов
        function showStage(stageNumber) {
            // Скрываем все этапы
            const stages = document.querySelectorAll('.stage-block');
            stages.forEach(stage => stage.classList.remove('active'));
            
            // Убираем активный класс со всех кнопок
            const buttons = document.querySelectorAll('.stage-nav-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });
            
            // Показываем выбранный этап
            const selectedStage = document.getElementById(`stage${stageNumber}`);
            selectedStage.classList.add('active');
            
            // Делаем активной соответствующую кнопку
            const activeButton = document.querySelector(`[onclick="showStage(${stageNumber})"]`);
            if (activeButton) {
                activeButton.classList.add('active');
                activeButton.setAttribute('aria-selected', 'true');
            }

            // Если переключились на IntroDay, запустим таймер
            if (stageNumber === 4) {
                setTimeout(initCountdown, 100);
            }

            announceChange(`Выбран этап: ${selectedStage.querySelector('.stage-title').textContent}`);
        }

        // Таймер обратного отсчета
        function initCountdown() {
            const targetDate = new Date('2025-09-17T00:00:00').getTime();
            
            function updateCountdown() {
                const now = new Date().getTime();
                const distance = targetDate - now;
                
                if (distance < 0) {
                    announceChange('Событие началось!');
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                const daysEl = document.getElementById('days');
                const hoursEl = document.getElementById('hours');
                const minutesEl = document.getElementById('minutes');
                const secondsEl = document.getElementById('seconds');
                
                if (daysEl && hoursEl && minutesEl && secondsEl) {
                    daysEl.textContent = String(days).padStart(2, '0');
                    hoursEl.textContent = String(hours).padStart(2, '0');
                    minutesEl.textContent = String(minutes).padStart(2, '0');
                    secondsEl.textContent = String(seconds).padStart(2, '0');
                }
            }
            
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // Функции победителей
        function renderTeams() {
            const grid = document.getElementById('winnersGrid');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const teamsToShow = filteredTeams.slice(startIndex, endIndex);

            grid.innerHTML = teamsToShow.map((team, index) => `
                <li class="winner-item" role="listitem">
                    <div class="winner-name">${team.name}</div>
                    <div class="winner-description">${team.description}</div>
                </li>
            `).join('');

            updateStats();
        }

        function renderPagination() {
            const totalPages = Math.ceil(filteredTeams.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Кнопка "Предыдущая"
            paginationHTML += `<button onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''} aria-label="Предыдущая страница">←</button>`;
            
            // Номера страниц
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    paginationHTML += `<button onclick="changePage(${i})" class="${i === currentPage ? 'active' : ''}" aria-label="Страница ${i}" ${i === currentPage ? 'aria-current="page"' : ''}>${i}</button>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    paginationHTML += `<span aria-hidden="true">...</span>`;
                }
            }
            
            // Кнопка "Следующая"
            paginationHTML += `<button onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''} aria-label="Следующая страница">→</button>`;
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredTeams.length / itemsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderTeams();
                renderPagination();
                announceChange(`Страница ${page} из ${totalPages}`);
            }
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filteredTeams = winnersData.filter(team => 
                    team.name.toLowerCase().includes(searchTerm)
                );
                currentPage = 1;
                renderTeams();
                renderPagination();
                announceChange(`Найдено ${filteredTeams.length} команд`);
            });
        }

        function updateStats() {
            const shownCount = Math.min(itemsPerPage, filteredTeams.length - (currentPage - 1) * itemsPerPage);
            document.getElementById('shownCount').textContent = shownCount;
            document.getElementById('totalCount').textContent = filteredTeams.length;
        }

        // Обработка клавиатурной навигации
        document.addEventListener('keydown', function(e) {
            // ESC для возврата к началу страницы
            if (e.key === 'Escape') {
                document.querySelector('.skip-link').focus();
                e.preventDefault();
            }
            
            // Стрелки для навигации по этапам
            if (e.target.classList.contains('stage-nav-btn')) {
                const buttons = Array.from(document.querySelectorAll('.stage-nav-btn'));
                const currentIndex = buttons.indexOf(e.target);
                
                if (e.key === 'ArrowLeft' && currentIndex > 0) {
                    buttons[currentIndex - 1].focus();
                    e.preventDefault();
                } else if (e.key === 'ArrowRight' && currentIndex < buttons.length - 1) {
                    buttons[currentIndex + 1].focus();
                    e.preventDefault();
                }
            }
        });

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            renderTeams();
            renderPagination();
            setupSearch();
            initCountdown();
            
            announceChange('Страница этапов ITM Lab для слабовидящих загружена. Используйте Tab для навигации.');
        });
    </script>
</body>
</html>
